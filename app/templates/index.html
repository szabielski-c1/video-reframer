<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intelligent Video Reframer</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="text-center mb-5">
                    <h1 class="display-4 text-primary mb-3">
                        <i class="bi bi-camera-reels"></i>
                        Intelligent Video Reframer
                    </h1>
                    <p class="lead text-muted">Transform your 16:9 horizontal videos into engaging 9:16 vertical content using AI-powered scene understanding</p>
                </div>

                <!-- Upload Section -->
                <div class="card shadow-sm mb-4" id="upload-section">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="bi bi-cloud-upload"></i> Upload Video</h5>
                    </div>
                    <div class="card-body">
                        <form id="upload-form" enctype="multipart/form-data">
                            <div class="mb-3">
                                <label for="video-file" class="form-label">Select Video File</label>
                                <input type="file" class="form-control" id="video-file" accept="video/*" required>
                                <div class="form-text">Supported formats: MP4, AVI, MOV, MKV (Max: 500MB, 10 minutes)</div>
                            </div>

                            <!-- Processing Settings -->
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="video-style" class="form-label">Video Style</label>
                                    <select class="form-select" id="video-style">
                                        <option value="auto">Auto-detect</option>
                                        <option value="vlog">Vlog/Personal</option>
                                        <option value="interview">Interview</option>
                                        <option value="presentation">Presentation</option>
                                        <option value="sports">Sports/Action</option>
                                        <option value="music">Music/Performance</option>
                                        <option value="documentary">Documentary</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="quality" class="form-label">Output Quality</label>
                                    <select class="form-select" id="quality">
                                        <option value="high">High Quality (slower)</option>
                                        <option value="medium" selected>Medium Quality</option>
                                        <option value="fast">Fast Processing</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Advanced Settings -->
                            <div class="accordion mb-3" id="advanced-settings">
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#advanced-options">
                                            <i class="bi bi-gear"></i> Advanced Settings
                                        </button>
                                    </h2>
                                    <div id="advanced-options" class="accordion-collapse collapse">
                                        <div class="accordion-body">
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <label for="smoothing" class="form-label">Camera Smoothing</label>
                                                    <input type="range" class="form-range" id="smoothing" min="0" max="1" step="0.1" value="0.8">
                                                    <div class="form-text">Higher values = smoother movements</div>
                                                </div>
                                                <div class="col-md-6">
                                                    <label for="padding" class="form-label">Subject Padding</label>
                                                    <input type="range" class="form-range" id="padding" min="1" max="2" step="0.1" value="1.2">
                                                    <div class="form-text">Extra space around subjects</div>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <label for="custom-focus" class="form-label">Custom Focus Instructions</label>
                                                <input type="text" class="form-control" id="custom-focus" placeholder="e.g., Keep the main speaker centered">
                                            </div>
                                            <div class="form-check mb-3">
                                                <input class="form-check-input" type="checkbox" id="preserve-text" checked>
                                                <label class="form-check-label" for="preserve-text">
                                                    Preserve text readability
                                                </label>
                                            </div>
                                            <div class="form-check mb-3">
                                                <input class="form-check-input" type="checkbox" id="preview-only">
                                                <label class="form-check-label" for="preview-only">
                                                    Generate preview only (faster)
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-primary btn-lg w-100" id="process-btn">
                                <i class="bi bi-play-circle"></i> Start Reframing
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Progress Section -->
                <div class="card shadow-sm mb-4 d-none" id="progress-section">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0"><i class="bi bi-hourglass-split"></i> Processing Video</h5>
                    </div>
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span id="progress-message">Initializing...</span>
                            <span id="progress-percentage">0%</span>
                        </div>
                        <div class="progress mb-3">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" id="progress-bar" style="width: 0%"></div>
                        </div>
                        <div class="d-flex justify-content-between">
                            <small class="text-muted">Job ID: <span id="job-id"></span></small>
                            <button class="btn btn-sm btn-outline-danger" id="cancel-btn">
                                <i class="bi bi-x-circle"></i> Cancel
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Results Section -->
                <div class="card shadow-sm d-none" id="results-section">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0"><i class="bi bi-check-circle"></i> Processing Complete</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <h6>Original Video (16:9)</h6>
                                <video id="original-video" class="w-100" controls style="max-height: 300px;">
                                    Your browser does not support the video tag.
                                </video>
                            </div>
                            <div class="col-md-6 mb-3">
                                <h6>Reframed Video (9:16)</h6>
                                <video id="reframed-video" class="w-100" controls style="max-height: 300px;">
                                    Your browser does not support the video tag.
                                </video>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <a href="#" id="download-link" class="btn btn-success w-100" download>
                                    <i class="bi bi-download"></i> Download Reframed Video
                                </a>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-outline-primary w-100" onclick="location.reload()">
                                    <i class="bi bi-arrow-clockwise"></i> Process Another Video
                                </button>
                            </div>
                        </div>

                        <!-- Analytics -->
                        <div class="accordion" id="analytics-accordion">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#analytics-details">
                                        <i class="bi bi-graph-up"></i> Processing Analytics
                                    </button>
                                </h2>
                                <div id="analytics-details" class="accordion-collapse collapse">
                                    <div class="accordion-body">
                                        <div id="analytics-content">
                                            <!-- Analytics will be populated by JavaScript -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Error Section -->
                <div class="alert alert-danger d-none" id="error-section">
                    <h5><i class="bi bi-exclamation-triangle"></i> Processing Error</h5>
                    <p id="error-message"></p>
                    <button class="btn btn-outline-danger" onclick="location.reload()">
                        <i class="bi bi-arrow-clockwise"></i> Try Again
                    </button>
                </div>

                <!-- Features Section -->
                <div class="row mt-5">
                    <div class="col-md-4 text-center mb-4">
                        <div class="card h-100 border-0">
                            <div class="card-body">
                                <i class="bi bi-robot display-6 text-primary mb-3"></i>
                                <h5>AI-Powered</h5>
                                <p class="text-muted">Uses Google Gemini AI to understand your video content and make intelligent framing decisions</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 text-center mb-4">
                        <div class="card h-100 border-0">
                            <div class="card-body">
                                <i class="bi bi-bezier2 display-6 text-primary mb-3"></i>
                                <h5>Smooth Motion</h5>
                                <p class="text-muted">Physics-based camera movements with jerk minimization for professional-quality results</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 text-center mb-4">
                        <div class="card h-100 border-0">
                            <div class="card-body">
                                <i class="bi bi-people display-6 text-primary mb-3"></i>
                                <h5>Multi-Subject</h5>
                                <p class="text-muted">Intelligently tracks and prioritizes multiple subjects throughout your video</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>